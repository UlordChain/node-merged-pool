{
  "name": "stratum-pool",
  "version": "0.1.0",
  "description": "High performance Stratum poolserver in Node.js",
  "keywords": [
    "ulord",
    "stratum",
    "mining",
    "pool",
    "server",
    "poolserver",
    "bitcoin",
    "litecoin",
    "cryptohello",
    "scrypt"
  ],
  "homepage": "https://github.com/UlordChain/node-stratum-pool",
  "bugs": {
    "url": "https://github.com/UlordChain/node-stratum-pool/issues"
  },
  "license": "GPL-2.0",
  "author": {
    "name": "Jackchen"
  },
  "contributors": [
    {
      "name": "vekexasia"
    },
    {
      "name": "TheSeven"
    }
  ],
  "main": "lib/index.js",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/UlordChain/node-stratum-pool.git"
  },
  "dependencies": {
    "multi-hashing": "git+https://github.com/UlordChain/node-multi-hashing.git",
    "bignum": "*",
    "base58-native": "*",
    "async": "*",
    "redis": "*",
    "node-json-minify": "*"
  },
  "engines": {
    "node": ">=0.10"
  },
  "gitHead": "044698c67e7c7f0a16fbc64aa9a17966aa85b924",
  "readme": "High performance Stratum poolserver in Node.js. One instance of this software can startup and manage multiple coin\npools, each with their own daemon and stratum port :)\n\n#### Notice\nThis is a module for Node.js that will do nothing on its own. Unless you're a Node.js developer who would like to\nhandle stratum authentication and raw share data then this module will not be of use to you. For a full featured portal\nthat uses this module, see [Ulord (Node Open Mining Portal)](https://github.com/UlordChain/ulord-node-stratum-pool). It\nhandles payments, website front-end, database layer, mutli-coin/pool support, auto-switching miners between coins/pools,\netc.. The portal also has an [MPOS](https://github.com/MPOS/php-mpos) compatibility mode so that the it can function as\na drop-in-replacement for [python-stratum-mining](https://github.com/Crypto-Expert/stratum-mining).\n\n\n#### Why\nThis server was built to be more efficient and easier to setup, maintain and scale than existing stratum poolservers\nwhich are written in python. Compared to the spaghetti state of the latest\n[stratum-mining python server](https://github.com/Crypto-Expert/stratum-mining/), this software should also have a\nlower barrier to entry for other developers to fork and add features or fix bugs.\n\n\nFeatures\n----------------------------------\n* Daemon RPC interface\n* Stratum TCP socket server\n* Block template / job manager\n* P2P to get block notifications as peer node\n* Optimized generation transaction building\n* Connecting to multiple daemons for redundancy\n* Process share submissions\n* Session managing for purging DDoS/flood initiated zombie workers\n* Auto ban IPs that are flooding with invalid shares\n* __POW__ (proof-of-work) & __POS__ (proof-of-stake) support\n* Transaction messages support\n* Vardiff (variable difficulty / share limiter)\n* When started with a coin deamon that hasn't finished syncing to the network it shows the blockchain download progress and initializes once synced\n\n#### Hashing algorithms supported:\n* ✓ __CryptoHello__ (Ulord [UT])\n* ✓ __SHA256__ (Bitcoin, Freicoin, Peercoin/PPCoin, Terracoin, etc..)\n* ✓ __Scrypt__ (Litecoin, Dogecoin, Feathercoin, etc..)\n* ✓ __Scrypt-Jane__ (YaCoin, CopperBars, Pennies, Tickets, etc..)\n* ✓ __Scrypt-N__ (Vertcoin [VTC])\n* ✓ __Quark__ (Quarkcoin [QRK])\n* ✓ __X13__ (MaruCoin, BoostCoin)\n* ✓ __NIST5__ (Talkcoin)\n* ✓ __Keccak__ (Maxcoin [MAX], HelixCoin, CryptoMeth, Galleon, 365coin, Slothcoin, BitcointalkCoin)\n* ✓ __Skein__ (Skeincoin [SKC])\n* ✓ __Groestl__ (Groestlcoin [GRS])\n\nMay be working (needs additional testing):\n* ? *Blake* (Blakecoin [BLC])\n* ? *Fugue* (Fuguecoin [FC])\n* ? *Qubit* (Qubitcoin [Q2C], Myriadcoin [MYR])\n* ? *SHAvite-3* (INKcoin [INK])\n* ? *Sha1* (Sha1coin [SHA], Yaycoin [YAY])\n\nNot working currently:\n* *Groestl* - for Myriadcoin\n* *Keccak* - for eCoin & Copperlark\n* *Hefty1* (Heavycoin [HVC])\n\n\nRequirements\n------------\n* node v0.10+\n* coin daemon (preferably one with a relatively updated API and not some crapcoin :p)\n\n\nExample Usage\n-------------\n\n#### Install as a node module by cloning repository\n\n```bash\ngit clone https://github.com/UlordChain/node-stratum-pool node_modules/stratum-pool\nnpm update\n```\n\n#### Module usage\n\nCreate the configuration for your coin:\n\nPossible options for `algorithm`: *sha256, scrypt, scrypt-jane, scrypt-n, quark, keccak, blake,\nskein, groestl, fugue, shavite3, hefty1, qubit, or sha1*.\n\n```javascript\nvar myCoin = {\n    \"name\": \"Ulord\",\n    \"symbol\": \"ULD\",\n    \"algorithm\": \"cryptohello\",\n    \"nValue\": 1024, //optional - defaults to 1024\n    \"rValue\": 1, //optional - defaults to 1\n    \"txMessages\": false, //optional - defaults to false,\n\n    /* Magic value only required for setting up p2p block notifications. It is found in the daemon\n       source code as the pchMessageStart variable.\n       For example, litecoin mainnet magic: http://git.io/Bi8YFw\n       And for litecoin testnet magic: http://git.io/NXBYJA */\n     \"peerMagic\": \"fbc0b6db\" //optional\n     \"peerMagicTestnet\": \"fcc1b7dc\" //optional\n};\n```\n\nIf you are using the `scrypt-jane` algorithm there are additional configurations:\n\n```javascript\nvar myCoin = {\n    \"name\": \"Freecoin\",\n    \"symbol\": \"FEC\",\n    \"algorithm\": \"scrypt-jane\",\n    \"chainStartTime\": 1375801200, //defaults to 1367991200 (YACoin) if not used\n    \"nMin\": 6, //defaults to 4 if not used\n    \"nMax\": 32 //defaults to 30 if not used\n};\n```\n\nIf you are using the `scrypt-n` algorithm there is an additional configuration:\n```javascript\nvar myCoin = {\n    \"name\": \"Execoin\",\n    \"symbol\": \"EXE\",\n    \"algorithm\": \"scrypt-n\",\n    /* This defaults to Vertcoin's timetable if not used. It is required for scrypt-n coins that\n       have modified their N-factor timetable to be different than Vertcoin's. */\n    \"timeTable\": {\n        \"2048\": 1390959880,\n        \"4096\": 1438295269,\n        \"8192\": 1485630658,\n        \"16384\": 1532966047,\n        \"32768\": 1580301436,\n        \"65536\": 1627636825,\n        \"131072\": 1674972214,\n        \"262144\": 1722307603\n    }\n};\n```\n\nIf you are using the `keccak` algorithm there are additional configurations *(The rare `normalHashing` keccak coins\nsuch as Copperlark and eCoin don't appear to work yet - only the popular ones like Maxcoin are)*:\n```javascript\nvar myCoin = {\n    \"name\": \"eCoin\",\n    \"symbol\": \"ECN\",\n    \"algorithm\": \"keccak\",\n\n    /* This is not required and set to false by default. Some coins such as Copperlark and eCoin\n       require it to be set to true. Maxcoin and most others are false. */\n    \"normalHashing\": true\n};\n```\n\n\nCreate and start new pool with configuration options and authentication function\n\n```javascript\nvar Stratum = require('stratum-pool');\n\nvar pool = Stratum.createPool({\n\n    \"coin\": myCoin,\n\n    \"address\": \"mi4iBXbBsydtcc5yFmsff2zCFVX4XG7qJc\", //Address to where block rewards are given\n\n    /* Block rewards go to the configured pool wallet address to later be paid out to miners,\n       except for a percentage that can go to, for examples, pool operator(s) as pool fees or\n       or to donations address. Addresses or hashed public keys can be used. Here is an example\n       of rewards going to the main pool op, a pool co-owner, and NOMP donation. */\n    \"rewardRecipients\": {\n        \"n37vuNFkXfk15uFnGoVyHZ6PYQxppD3QqK\": 1.5, //1.5% goes to pool op\n        \"mirj3LtZxbSTharhtXvotqtJXUY7ki5qfx\": 0.5, //0.5% goes to a pool co-owner\n\n        /* 0.1% donation to NOMP. This pubkey can accept any type of coin, please leave this in\n           your config to help support NOMP development. */\n        \"22851477d63a085dbc2398c8430af1c09e7343f6\": 0.1\n    },\n\n    \"blockRefreshInterval\": 1000, //How often to poll RPC daemons for new blocks, in milliseconds\n\n\n    /* Some miner apps will consider the pool dead/offline if it doesn't receive anything new jobs\n       for around a minute, so every time we broadcast jobs, set a timeout to rebroadcast\n       in this many seconds unless we find a new job. Set to zero or remove to disable this. */\n    \"jobRebroadcastTimeout\": 55,\n\n    //instanceId: 37, //Recommend not using this because a crypto-random one will be generated\n\n    /* Some attackers will create thousands of workers that use up all available socket connections,\n       usually the workers are zombies and don't submit shares after connecting. This features\n       detects those and disconnects them. */\n    \"connectionTimeout\": 600, //Remove workers that haven't been in contact for this many seconds\n\n    /* Sometimes you want the block hashes even for shares that aren't block candidates. */\n    \"emitInvalidBlockHashes\": false,\n\n    /* Enable for client IP addresses to be detected when using a load balancer with TCP proxy\n       protocol enabled, such as HAProxy with 'send-proxy' param:\n       http://haproxy.1wt.eu/download/1.5/doc/configuration.txt */\n    \"tcpProxyProtocol\": false,\n\n    /* If a worker is submitting a high threshold of invalid shares we can temporarily ban their IP\n       to reduce system/network load. Also useful to fight against flooding attacks. If running\n       behind something like HAProxy be sure to enable 'tcpProxyProtocol', otherwise you'll end up\n       banning your own IP address (and therefore all workers). */\n    \"banning\": {\n        \"enabled\": true,\n        \"time\": 600, //How many seconds to ban worker for\n        \"invalidPercent\": 50, //What percent of invalid shares triggers ban\n        \"checkThreshold\": 500, //Check invalid percent when this many shares have been submitted\n        \"purgeInterval\": 300 //Every this many seconds clear out the list of old bans\n    },\n\n    /* Each pool can have as many ports for your miners to connect to as you wish. Each port can\n       be configured to use its own pool difficulty and variable difficulty settings. varDiff is\n       optional and will only be used for the ports you configure it for. */\n    \"ports\": {\n        \"3032\": { //A port for your miners to connect to\n            \"diff\": 32, //the pool difficulty for this port\n\n            /* Variable difficulty is a feature that will automatically adjust difficulty for\n               individual miners based on their hashrate in order to lower networking overhead */\n            \"varDiff\": {\n                \"minDiff\": 8, //Minimum difficulty\n                \"maxDiff\": 512, //Network difficulty will be used if it is lower than this\n                \"targetTime\": 15, //Try to get 1 share per this many seconds\n                \"retargetTime\": 90, //Check to see if we should retarget every this many seconds\n                \"variancePercent\": 30 //Allow time to very this % from target without retargeting\n            }\n        },\n        \"3256\": { //Another port for your miners to connect to, this port does not use varDiff\n            \"diff\": 256 //The pool difficulty\n        }\n    },\n\n    /* Recommended to have at least two daemon instances running in case one drops out-of-sync\n       or offline. For redundancy, all instances will be polled for block/transaction updates\n       and be used for submitting blocks. Creating a backup daemon involves spawning a daemon\n       using the \"-datadir=/backup\" argument which creates a new daemon instance with it's own\n       RPC config. For more info on this see:\n          - https://en.bitcoin.it/wiki/Data_directory\n          - https://en.bitcoin.it/wiki/Running_bitcoind */\n    \"daemons\": [\n        {   //Main daemon instance\n            \"host\": \"127.0.0.1\",\n            \"port\": 19332,\n            \"user\": \"litecoinrpc\",\n            \"password\": \"testnet\"\n        },\n        {   //Backup daemon instance\n            \"host\": \"127.0.0.1\",\n            \"port\": 19344,\n            \"user\": \"litecoinrpc\",\n            \"password\": \"testnet\"\n        }\n    ],\n\n\n    /* This allows the pool to connect to the daemon as a node peer to receive block updates.\n       It may be the most efficient way to get block updates (faster than polling, less\n       intensive than blocknotify script). It requires the additional field \"peerMagic\" in\n       the coin config. */\n    \"p2p\": {\n        \"enabled\": false,\n\n        /* Host for daemon */\n        \"host\": \"127.0.0.1\",\n\n        /* Port configured for daemon (this is the actual peer port not RPC port) */\n        \"port\": 19333,\n\n        /* If your coin daemon is new enough (i.e. not a shitcoin) then it will support a p2p\n           feature that prevents the daemon from spamming our peer node with unnecessary\n           transaction data. Assume its supported but if you have problems try disabling it. */\n        \"disableTransactions\": true\n\n    }\n\n}, function(ip, port , workerName, password, callback){ //stratum authorization function\n    console.log(\"Authorize \" + workerName + \":\" + password + \"@\" + ip);\n    callback({\n        error: null,\n        authorized: true,\n        disconnect: false\n    });\n});\n```\n\n\nListen to pool events\n```javascript\n\npool.on('share', function(isValidShare, isValidBlock, data){\n\n    if (isValidBlock)\n        console.log('Block found');\n    else if (isValidShare)\n        console.log('Valid share submitted');\n    else if (data.blockHash)\n        console.log('We thought a block was found but it was rejected by the daemon');\n    else\n        console.log('Invalid share submitted')\n\n    console.log('share data: ' + JSON.stringify(data));\n});\n\n\n\npool.on('log', function(severity, logKey, logText){\n    console.log(severity + ': ' + '[' + logKey + '] ' + logText);\n});\n```\n\nStart pool\n```javascript\npool.start();\n```\n\nLicense\n-------\nReleased under the GNU General Public License v2\n\nhttp://www.gnu.org/licenses/gpl-2.0.html\n",
  "readmeFilename": "README.md",
  "_id": "stratum-pool@0.1.0",
  "_shasum": "6d5d2df8b551783dfa9cbf7deba48eb4113afe3a",
  "_from": "git+https://github.com/UlordChain/node-stratum-pool.git",
  "_resolved": "git+https://github.com/UlordChain/node-stratum-pool.git#044698c67e7c7f0a16fbc64aa9a17966aa85b924"
}
